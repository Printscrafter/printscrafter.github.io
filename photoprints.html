<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Prints- Print, Brand & Advertising</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Custom styles for dropdown */
        .group:hover .group-hover\:block {
            display: block;
        }
        .dropdown-menu {
            display: none;
        }
        /* Typewriter cursor */
        #animated-text {
            display: inline-block; /* Needed for border */
            vertical-align: bottom; /* Align cursor properly */
            animation: blink-caret .75s step-end infinite;
        }
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: white; }
        }
        /* Newsletter Popup Styles */
        #newsletter-popup {
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        #newsletter-popup.hidden {
            opacity: 0;
            visibility: hidden;
        }
         #newsletter-popup:not(.hidden) {
             opacity: 1;
             visibility: visible;
         }
         
          /* Add custom animations or styles here if needed */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Basic spinner */
        .loader {
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 4px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block; /* Or 'block' if needed */
            margin-left: 10px; /* Adjust spacing */
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <!-- Header & Navigation -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <div>
                <a href="#" class="text-2xl font-bold text-gray-800">Printscrafter</a>
            </div>
            <div class="hidden md:flex items-center space-x-6">
                <a href="index.html" class="nav-active text-gray-600 hover:text-blue-500 transition duration-300">Home</a> <!-- Updated Home link and added active class -->
                <a href="about.html" class="text-gray-600 hover:text-blue-500 transition duration-300">About</a> <!-- Updated About link -->
                <a href="#contact" class="text-gray-600 hover:text-blue-500 transition duration-300">Contact</a>
                <a href="https://printscrafter.blogspot.com" class="text-gray-600 hover:text-blue-500 transition duration-300">Blog</a>
                <a href="products.html" class="text-gray-600 hover:text-blue-500 transition duration-300">Products</a>
                <!-- Services Dropdown -->
                <div class="relative group">
                    <button class="text-gray-600 hover:text-blue-500 transition duration-300 focus:outline-none">
                        Services <svg class="w-4 h-4 inline-block ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20 dropdown-menu group-hover:block max-h-60 overflow-y-auto"> <!-- Added scroll for more items -->
                        <a href="photoprints.html" data-slide-target="0" class="service-nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-blue-500 hover:text-white transition duration-300">Photo Prints</a>
                        <a href="passportprints.html" data-slide-target="1" class="service-nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-blue-500 hover:text-white transition duration-300">Passport Prints</a>
                        <a href="artworkprints.html" data-slide-target="2" class="service-nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-blue-500 hover:text-white transition duration-300">Artwork Prints</a>
                        <a href="paperprints.html" data-slide-target="3" class="service-nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-blue-500 hover:text-white transition duration-300">Paper Prints</a>
                        <a href="generalprints.html" data-slide-target="4" class="service-nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-blue-500 hover:text-white transition duration-300">General Prints</a>
                        <a href="photoediting.html" data-slide-target="5" class="service-nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-blue-500 hover:text-white transition duration-300">Photo Editing</a> <!-- Added -->
                        <a href="photobook.html" data-slide-target="6" class="service-nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-blue-500 hover:text-white transition duration-300">Photobook</a> <!-- Added -->
                        <a href="casepackage.html" data-slide-target="7" class="service-nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-blue-500 hover:text-white transition duration-300">Case Package</a> <!-- Added -->
                        <a href="artstudio.html" data-slide-target="9" class="service-nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-blue-500 hover:text-white transition duration-300">Art Studio</a>
                    </div>
                </div>
            </div>
            <!-- Mobile Menu Button -->
            <div class="md:hidden">
                <button id="mobile-menu-button" class="text-gray-600 hover:text-blue-500 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-2 pt-2 pb-4 space-y-1 sm:px-3 max-h-[calc(100vh-80px)] overflow-y-auto"> <!-- Added scroll -->
            <a href="index.html" class="nav-active block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-500 hover:bg-gray-50 transition duration-300">Home</a> <!-- Updated Home link and added active class -->
            <a href="about.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-500 hover:bg-gray-50 transition duration-300">About</a> <!-- Updated About link -->
            <a href="#contact" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-500 hover:bg-gray-50 transition duration-300">Contact</a>
            <a href="https://printscrafter.blogspot.com" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-500 hover:bg-gray-50 transition duration-300">Blog</a>
            <a href="products.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-500 hover:bg-gray-50 transition duration-300">Products</a>
            <div class="relative group">
                 <button class="w-full text-left block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-500 hover:bg-gray-50 transition duration-300 focus:outline-none">
                     Services <svg class="w-4 h-4 inline-block ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                 </button>
                 <!-- Mobile Dropdown (can be enhanced with JS for better UX) -->
                 <div class="pl-4 mt-1 space-y-1 dropdown-menu group-hover:block">
                     <a href="photoprints.html" data-slide-target="0" class="service-nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-blue-500 hover:bg-gray-100 transition duration-300">Photo Prints</a>
                     <a href="passportprints.html" data-slide-target="1" class="service-nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-blue-500 hover:bg-gray-100 transition duration-300">Passport Prints</a>
                     <a href="artworkprints.html" data-slide-target="2" class="service-nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-blue-500 hover:bg-gray-100 transition duration-300">Artwork Prints</a>
                     <a href="paperprints.html" data-slide-target="3" class="service-nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-blue-500 hover:bg-gray-100 transition duration-300">Paper Prints</a>
                     <a href="generalprints.html" data-slide-target="4" class="service-nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-blue-500 hover:bg-gray-100 transition duration-300">General Prints</a>
                     <a href="photoediting.html" data-slide-target="5" class="service-nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-blue-500 hover:bg-gray-100 transition duration-300">Photo Editing</a> <!-- Added -->
                     <a href="photobook.html" data-slide-target="6" class="service-nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-blue-500 hover:bg-gray-100 transition duration-300">Photobook</a> <!-- Added -->
                     <a href="casepackage.html" data-slide-target="7" class="service-nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-blue-500 hover:bg-gray-100 transition duration-300">Case Package</a> <!-- Added -->
                     <a href="artstudio.html" data-slide-target="9" class="service-nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-blue-500 hover:bg-gray-100 transition duration-300">Art Studio</a>
                 </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="hero" class="relative bg-brand-red text-white text-center py-20 md:py-32 animate-fade-in-down" style="background-image: url('images/printnow.jpg'); background-size: cover; background-position: center;"> <!-- Updated background image path -->
        <!-- Overlay -->
        <div class="absolute inset-0 bg-brand-red opacity-50 z-0"></div>
        <!-- Content -->
        <div class="container mx-auto px-6 relative z-10">
            <div class="text-4xl md:text-5xl font-bold mb-6 h-16 md:h-20"> <!-- Added height to prevent layout shift -->
                <span id="animated-text" class="border-r-2 border-white pr-1"></span> <!-- Span for typewriter text -->
            </div>
            <p class="text-lg md:text-xl mb-8">Upload your images or artworks and get them printed!</p>
            <a href="#contact" class="bg-white text-brand-red font-semibold py-2 px-6 rounded-full hover:bg-gray-200 transition duration-300">Get Started</a>
        </div>
    </section>
        <!-- Image Upload Section -->
        <section id="upload-section" class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-semibold mb-4 text-gray-700">Upload Your Custom Images</h2>
            <div class="border-2 border-dashed border-gray-300 p-6 text-center rounded-lg hover:border-blue-400 cursor-pointer" id="drop-zone">
                <input type="file" id="file-input" multiple accept="image/*" class="hidden">
                <label for="file-input" class="cursor-pointer">
                    <svg class="w-12 h-12 mx-auto text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>
                    <p class="mt-2 text-sm text-gray-600">Drag & drop your images here, or click to select files</p>
                    <p class="text-xs text-gray-500">PNG, JPG, GIF up to 10MB</p>
                </label>
            </div>
            <div id="preview-area" class="mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                <!-- Image previews will be added here -->
            </div>
        </section>

        <!-- Order Form Section -->
        <section id="order-form-section" class="bg-white p-6 rounded-lg shadow-md mb-8 hidden">
             <h2 class="text-2xl font-semibold mb-4 text-gray-700">Configure Your Prints</h2>
             <div id="image-details-area">
                 <!-- Dynamically added forms for each image -->
             </div>
        </section>

        <!-- User Details Section -->
        <section id="user-details-section" class="bg-white p-6 rounded-lg shadow-md mb-8 hidden">
            <h2 class="text-2xl font-semibold mb-4 text-gray-700">Your Details</h2>
            <form id="user-form">
                <div class="mb-4">
                    <label for="user-name" class="block text-gray-700 text-sm font-bold mb-2">Full Name:</label>
                    <input type="text" id="user-name" name="userName" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                </div>
                <div class="mb-4">
                    <label for="user-email" class="block text-gray-700 text-sm font-bold mb-2">Email Address:</label>
                    <input type="email" id="user-email" name="userEmail" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                </div>
                <div class="mb-4">
                    <label for="user-address" class="block text-gray-700 text-sm font-bold mb-2">Delivery Address:</label>
                    <textarea id="user-address" name="userAddress" rows="3" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"></textarea>
                </div>
            </form>
        </section>

        <!-- Order Summary and Submit -->
        <section id="summary-section" class="bg-white p-6 rounded-lg shadow-md mb-8 hidden">
            <h2 class="text-2xl font-semibold mb-4 text-gray-700">Order Summary</h2>
            <div class="flex justify-between items-center mb-4">
                <span class="text-gray-600">Total Items:</span>
                <span id="total-items" class="font-bold text-lg">0</span>
            </div>
            <div class="flex justify-between items-center">
                <span class="text-gray-600">Total Price:</span>
                <span id="total-price" class="font-bold text-lg text-green-600">$0.00</span>
            </div>
            <button id="submit-order" class="mt-6 w-full bg-pink-600 hover:bg-pink-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-150 ease-in-out flex items-center justify-center disabled:opacity-50" disabled>
                Place Order
                <span id="submit-loader" class="loader hidden"></span>
            </button>
        </section>

    <!-- Contact Section (Placeholder) -->
    <section id="contact" class="py-16 bg-brand-red text-white">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-3xl font-bold mb-6">Get in Touch</h2>
            <p class="mb-8">Ready to start your next project? Contact us today!</p>
            <a href="mailto:printscrafter.com@gmail.com" class="bg-white text-brand-red font-semibold py-2 px-6 rounded-full hover:bg-gray-200 transition duration-300">Contact Us</a>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <div class="mb-4 flex justify-center space-x-4">
                <!-- Replace # with actual social media links -->
                <a href="https://facebook.com/printscrafter" target="_blank" rel="noopener noreferrer" class="hover:text-brand-red transition duration-300">Facebook</a>
                <a href="https://twitter.com/printscrafter" target="_blank" rel="noopener noreferrer" class="hover:text-brand-red transition duration-300">Twitter</a>
                <a href="https://instagram.com/printscrafter" target="_blank" rel="noopener noreferrer" class="hover:text-brand-red transition duration-300">Instagram</a>
                <a href="https://linkedin.com/in/printscrafter" target="_blank" rel="noopener noreferrer" class="hover:text-brand-red transition duration-300">LinkedIn</a>
            </div>
            <p class="text-sm">&copy; 2025 Printscrafter. All rights reserved.</p>
        </div>
    </footer>

     <!-- WhatsApp Chat Button -->
     <!-- Replace YOUR_WHATSAPP_NUMBER with the actual number including country code e.g., 2348012345678 -->
    <a href="https://wa.me/2348154224416" target="_blank" rel="noopener noreferrer" class="fixed bottom-5 right-5 bg-green-500 text-white p-3 rounded-full shadow-lg hover:bg-green-600 transition duration-300 z-50" aria-label="Chat on WhatsApp">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="w-6 h-6 fill-current">
            <!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
            <path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.8 0-65-10.1-90.4-27.9L103.6 416l-28.1 7.4L100 397.8c-19.9-26.4-31.8-58.1-31.8-92.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54s54 81.1 54 130.4c0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7 .9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 69.6 13.9 16.3-2.1 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/>
        </svg>
    </a>

     <!-- Newsletter Popup -->
    <div id="newsletter-popup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[100] hidden p-4">
        <div class="bg-white p-8 rounded-lg shadow-xl max-w-md w-full relative text-center">
            <button id="close-popup-btn" class="absolute top-2 right-2 text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Subscribe to Our Newsletter!</h2>
            <p class="text-gray-600 mb-6">Get the latest updates, offers, and insights directly in your inbox.</p>
            <form id="newsletter-form" novalidate> <!-- Added novalidate to handle validation via JS if needed -->
                 <input type="text" id="newsletter-name" placeholder="Enter your full name" required class="w-full px-4 py-2 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-brand-red">
                <input type="email" id="newsletter-email" placeholder="Enter your email" required class="w-full px-4 py-2 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-brand-red">
                <button type="submit" class="w-full bg-brand-red text-white font-semibold py-2 px-6 rounded-full hover:bg-opacity-90 transition duration-300">Subscribe</button>
                 <p id="newsletter-message" class="text-sm mt-2 text-red-500"></p> <!-- For messages -->
            </form>
        </div>
    </div>


    <script>
        // Mobile menu toggle script
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Close mobile menu when a link is clicked (optional enhancement)
        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                // Don't close if it's the services dropdown button itself
                if (!link.closest('.relative.group > button')) {
                     mobileMenu.classList.add('hidden');
                }
            });
        });
         // Close mobile dropdown when a sub-link is clicked
        mobileMenu.querySelectorAll('.dropdown-menu a').forEach(link => {
            link.addEventListener('click', () => {
                 mobileMenu.classList.add('hidden');
            });
        });


        // Add simple fade-in animation on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-fade-in-up'); // Example animation
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('section').forEach(section => {
            if (section.id !== 'hero') { // Exclude hero as it has its own animation
                 section.classList.add('opacity-0'); // Start hidden for animation
                 observer.observe(section);
            }
        });

        // Add Tailwind animation classes and custom color
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                'brand-red': '#FF005C', // Custom brand color based on logo
              },
              animation: {
                'fade-in-down': 'fadeInDown 0.6s ease-out forwards',
                'fade-in-up': 'fadeInUp 0.8s ease-out forwards',
              },
              keyframes: {
                fadeInDown: {
                  '0%': { opacity: '0', transform: 'translateY(-20px)' },
                  '100%': { opacity: '1', transform: 'translateY(0)' },
                },
                fadeInUp: {
                  '0%': { opacity: '0', transform: 'translateY(20px)' },
                  '100%': { opacity: '1', transform: 'translateY(0)' },
                }
              }
            }
          }
        }

        // Typewriter effect script
        const animatedTextElement = document.getElementById('animated-text');
        const textsToAnimate = ["Photo Prints", "Passport Prints", "Artwork Prints", "Paper Prints", "General Prints", "Photo Editing", "Photobook", "Case Package", "Design Now", "Art Studio"]; // Updated services list
        let textIndex = 0;
        let charIndex = 0;
        let isDeleting = false;
        const typingSpeed = 150; // Milliseconds per character
        const deletingSpeed = 75;
        const delayBetweenTexts = 1500; // Milliseconds pause after typing/deleting

        function typeWriter() {
            const currentText = textsToAnimate[textIndex];
            let displayedText = '';

            if (isDeleting) {
                // Deleting text
                displayedText = currentText.substring(0, charIndex - 1);
                charIndex--;
            } else {
                // Typing text
                displayedText = currentText.substring(0, charIndex + 1);
                charIndex++;
            }

            animatedTextElement.textContent = displayedText;
            animatedTextElement.style.borderColor = 'white'; // Keep cursor visible while typing/deleting

            let typeDelay = typingSpeed;

            if (isDeleting) {
                typeDelay = deletingSpeed;
            }

            if (!isDeleting && charIndex === currentText.length) {
                // Finished typing current text
                typeDelay = delayBetweenTexts;
                isDeleting = true;
                animatedTextElement.style.borderColor = 'white'; // Ensure cursor blinks after typing
            } else if (isDeleting && charIndex === 0) {
                // Finished deleting current text
                isDeleting = false;
                textIndex = (textIndex + 1) % textsToAnimate.length;
                typeDelay = typingSpeed; // Start typing next text immediately
            }

            setTimeout(typeWriter, typeDelay);
        }

        // Start the animation when the page loads
        document.addEventListener('DOMContentLoaded', () => {
              setTimeout(typeWriter, delayBetweenTexts); // Initial delay before starting
        });

        // Product Carousel script
        const carouselItemsContainer = document.getElementById('carousel-items');
        const carouselItems = carouselItemsContainer.querySelectorAll('.carousel-item');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        let currentSlide = 0;
        let autoSlideInterval;

        function showSlide(index) {
            carouselItems.forEach((item, i) => {
                item.classList.remove('opacity-100');
                item.classList.add('opacity-0');
                if (i === index) {
                    item.classList.remove('opacity-0');
                    item.classList.add('opacity-100');
                }
            });
            currentSlide = index;
        }

        function nextSlide() {
            const nextIndex = (currentSlide + 1) % carouselItems.length;
            showSlide(nextIndex);
        }

        function prevSlide() {
            const prevIndex = (currentSlide - 1 + carouselItems.length) % carouselItems.length;
            showSlide(prevIndex);
        }

        function startAutoSlide() {
            stopAutoSlide(); // Clear existing interval if any
            autoSlideInterval = setInterval(nextSlide, 5000); // Change slide every 5 seconds
        }

        function stopAutoSlide() {
            clearInterval(autoSlideInterval);
        }

        // Event Listeners for controls
        nextBtn.addEventListener('click', () => {
            nextSlide();
            stopAutoSlide(); // Optional: Stop auto-slide on manual control
            // startAutoSlide(); // Optional: Restart auto-slide after manual control
        });

        prevBtn.addEventListener('click', () => {
            prevSlide();
            stopAutoSlide(); // Optional: Stop auto-slide on manual control
            // startAutoSlide(); // Optional: Restart auto-slide after manual control
        });

        // Initialize carousel
        document.addEventListener('DOMContentLoaded', () => {
            if (carouselItems.length > 0) {
                showSlide(0);
                startAutoSlide(); // Start auto-sliding
            }
        });

        // Blog Carousel script
        const blogCarouselContainer = document.getElementById('blog-carousel-items');
        const blogCarouselItems = blogCarouselContainer.querySelectorAll('.blog-carousel-item');
        const blogPrevBtn = document.getElementById('blog-prev-btn');
        const blogNextBtn = document.getElementById('blog-next-btn');
        let currentBlogSlide = 0;
        const totalBlogSlides = blogCarouselItems.length;
        let blogAutoSlideInterval;

        function showBlogSlide(index) {
            const itemWidth = blogCarouselItems[0].offsetWidth; // Get width of a single item including padding
            const newTransform = -index * itemWidth;
            blogCarouselContainer.style.transform = `translateX(${newTransform}px)`;
            currentBlogSlide = index;
        }

        function nextBlogSlide() {
             // Determine items per view based on screen size
            let itemsPerView = 1;
            if (window.innerWidth >= 1024) { // lg breakpoint
                itemsPerView = 3;
            } else if (window.innerWidth >= 768) { // md breakpoint
                itemsPerView = 2;
            }

            const maxSlideIndex = totalBlogSlides - itemsPerView;
            const nextIndex = (currentBlogSlide + 1) > maxSlideIndex ? 0 : currentBlogSlide + 1;
            showBlogSlide(nextIndex);
        }

        function prevBlogSlide() {
             // Determine items per view based on screen size
            let itemsPerView = 1;
            if (window.innerWidth >= 1024) { // lg breakpoint
                itemsPerView = 3;
            } else if (window.innerWidth >= 768) { // md breakpoint
                itemsPerView = 2;
            }
            const maxSlideIndex = totalBlogSlides - itemsPerView;
            const prevIndex = (currentBlogSlide - 1) < 0 ? maxSlideIndex : currentBlogSlide - 1;
            showBlogSlide(prevIndex);
        }

         function startBlogAutoSlide() {
            stopBlogAutoSlide(); // Clear existing interval if any
            blogAutoSlideInterval = setInterval(nextBlogSlide, 6000); // Change slide every 6 seconds
        }

        function stopBlogAutoSlide() {
            clearInterval(blogAutoSlideInterval);
        }


        // Event Listeners for blog controls
        blogNextBtn.addEventListener('click', () => {
            nextBlogSlide();
             stopBlogAutoSlide();
        });

        blogPrevBtn.addEventListener('click', () => {
            prevBlogSlide();
             stopBlogAutoSlide();
        });

         // Re-calculate on resize
         window.addEventListener('resize', () => {
             showBlogSlide(currentBlogSlide); // Adjust position based on new width
         });

        // Initialize blog carousel
        document.addEventListener('DOMContentLoaded', () => {
            if (blogCarouselItems.length > 0) {
                showBlogSlide(0);
                 startBlogAutoSlide();
            }
        });

        // Service Carousel script
        const serviceCarouselContainer = document.getElementById('service-carousel-items');
        const serviceCarouselItems = serviceCarouselContainer ? serviceCarouselContainer.querySelectorAll('.service-carousel-item') : [];
        const servicePrevBtn = document.getElementById('service-prev-btn');
        const serviceNextBtn = document.getElementById('service-next-btn');
        const serviceNavLinks = document.querySelectorAll('.service-nav-link'); // Get nav links
        let currentServiceSlide = 0;
        const totalServiceSlides = serviceCarouselItems.length;
        let serviceAutoSlideInterval;

        function showServiceSlide(index) {
            // Guard clause in case elements aren't found or empty
            if (!serviceCarouselContainer || !serviceCarouselItems || serviceCarouselItems.length === 0) {
                // console.error("Service carousel elements not found or empty.");
                return;
            }
             // Ensure index is within bounds (considering items per view for max index)
            let itemsPerViewResize = 1;
            if (window.innerWidth >= 1024) itemsPerViewResize = 3;
            else if (window.innerWidth >= 768) itemsPerViewResize = 2;
            const maxSlideIndexResize = Math.max(0, totalServiceSlides - itemsPerViewResize);
            index = Math.max(0, Math.min(index, maxSlideIndexResize));


            const itemWidth = serviceCarouselItems[0].offsetWidth; // Assumes all items have same width
            const newTransform = -index * itemWidth;
            serviceCarouselContainer.style.transform = `translateX(${newTransform}px)`;
            currentServiceSlide = index;
        }

        function nextServiceSlide() {
            if (totalServiceSlides === 0) return;
            let itemsPerView = 1;
            if (window.innerWidth >= 1024) itemsPerView = 3;
            else if (window.innerWidth >= 768) itemsPerView = 2;

            const maxSlideIndex = Math.max(0, totalServiceSlides - itemsPerView);
            const nextIndex = (currentServiceSlide + 1) > maxSlideIndex ? 0 : currentServiceSlide + 1;
            showServiceSlide(nextIndex);
        }

        function prevServiceSlide() {
             if (totalServiceSlides === 0) return;
            let itemsPerView = 1;
            if (window.innerWidth >= 1024) itemsPerView = 3;
            else if (window.innerWidth >= 768) itemsPerView = 2;

            const maxSlideIndex = Math.max(0, totalServiceSlides - itemsPerView);
            const prevIndex = (currentServiceSlide - 1) < 0 ? maxSlideIndex : currentServiceSlide - 1;
            showServiceSlide(prevIndex);
        }

        function startServiceAutoSlide() {
            stopServiceAutoSlide(); // Clear existing interval
            if (totalServiceSlides > 1) { // Only start if more than one slide
                 serviceAutoSlideInterval = setInterval(nextServiceSlide, 7000); // Change slide every 7 seconds
            }
        }

        function stopServiceAutoSlide() {
            clearInterval(serviceAutoSlideInterval);
        }

        // Event Listeners for service controls (check if buttons exist first)
        if(serviceNextBtn) {
            serviceNextBtn.addEventListener('click', () => {
                nextServiceSlide();
                stopServiceAutoSlide(); // Stop auto slide on manual interaction
            });
        }

        if(servicePrevBtn) {
            servicePrevBtn.addEventListener('click', () => {
                prevServiceSlide();
                stopServiceAutoSlide(); // Stop auto slide on manual interaction
            });
        }

        // Event listeners for nav links to jump to slide
        serviceNavLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                // Prevent default anchor behavior if it's just for sliding
                // e.preventDefault(); // Keep default if you want the #services in URL

                const targetSlide = parseInt(link.getAttribute('data-slide-target'), 10);
                if (!isNaN(targetSlide)) {
                    // Smooth scroll to the section first if it's not already visible
                    const servicesSection = document.getElementById('services');
                    if (servicesSection) {
                        const sectionTop = servicesSection.offsetTop;
                        // Basic check if scrolling is needed (adjust threshold as needed)
                        if (Math.abs(window.scrollY - (sectionTop - 80)) > 10) {
                             window.scrollTo({ top: sectionTop - 80, behavior: 'smooth' }); // Adjust offset for sticky header
                        }
                         // Delay showing slide slightly to allow scroll to potentially finish
                        setTimeout(() => {
                            showServiceSlide(targetSlide);
                            stopServiceAutoSlide();
                        }, 150); // Shorter delay
                    } else {
                         // Fallback if section not found (shouldn't happen)
                         showServiceSlide(targetSlide);
                         stopServiceAutoSlide();
                    }
                }
                 // Close mobile menu if open
                 if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                     mobileMenu.classList.add('hidden');
                 }
            });
        });


         // Re-calculate on resize for service carousel
         window.addEventListener('resize', () => {
             // Recalculate and show the current slide based on new dimensions/items per view
             showServiceSlide(currentServiceSlide);
         });

         // Initialize service carousel on DOMContentLoaded
         document.addEventListener('DOMContentLoaded', () => {
             if (serviceCarouselItems.length > 0) {
                 // Initial calculation might be slightly off before full render, recalculate after a short delay
                 setTimeout(() => {
                    showServiceSlide(0); // Start at the first slide
                    startServiceAutoSlide(); // Start auto-sliding
                 }, 100); // Short delay for layout stabilization
             }
         });


        // Newsletter Popup script
        // Newsletter Popup script
        const newsletterPopup = document.getElementById('newsletter-popup');
        const closePopupBtn = document.getElementById('close-popup-btn');
        const newsletterForm = document.getElementById('newsletter-form');
        const newsletterNameInput = document.getElementById('newsletter-name'); // Added Name input
        const newsletterEmailInput = document.getElementById('newsletter-email');
        const newsletterMessage = document.getElementById('newsletter-message'); // Added message element

        // Placeholder URL for Google Apps Script Web App
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxpPGsCwkGoQI654b-8NFiXtMOFt8gB9--P9lM_o_SE_DxCZ65J-K7Y8mLiu-IOrYmZtw/exec'; // IMPORTANT: Replace this URL

        function showNewsletterPopup() {
            // Check if the user has already subscribed or closed it this session/permanently
            if (!localStorage.getItem('newsletterSubscribed') && !sessionStorage.getItem('newsletterClosed')) {
                 newsletterPopup.classList.remove('hidden');
            }
        }

        function hideNewsletterPopup(preventFuturePopups = false) {
            newsletterPopup.classList.add('hidden');
            if (preventFuturePopups) {
                localStorage.setItem('newsletterSubscribed', 'true'); // Prevent permanently
            } else {
                 sessionStorage.setItem('newsletterClosed', 'true'); // Prevent for this session only
            }
        }

        // Event listener for close button
        closePopupBtn.addEventListener('click', () => {
            hideNewsletterPopup(false); // Hide for session
        });

        // Event listener for form submission
        newsletterForm.addEventListener('submit', async (e) => {
            e.preventDefault(); // Prevent actual form submission
            const name = newsletterNameInput.value.trim();
            const email = newsletterEmailInput.value.trim();
            newsletterMessage.textContent = ''; // Clear previous messages

            if (!name || !email) {
                 newsletterMessage.textContent = 'Please fill in both name and email.';
                 return;
            }
            if (GOOGLE_SCRIPT_URL === 'YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL_HERE') {
                 newsletterMessage.textContent = 'Subscription endpoint not configured.';
                 console.error('Please replace YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL_HERE in the script.');
                 // Optionally hide popup even if not configured, or leave it open
                 // hideNewsletterPopup(true); // Hide permanently even if not configured?
                 return;
            }


            const formData = new FormData();
            formData.append('name', name);
            formData.append('email', email);
            formData.append('timestamp', new Date().toISOString()); // Add timestamp

            // Disable button while submitting
            const submitButton = newsletterForm.querySelector('button[type="submit"]');
            submitButton.disabled = true;
            submitButton.textContent = 'Subscribing...';


            try {
                // Send data to Google Apps Script Web App using fetch
                const response = await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    body: formData,
                    // mode: 'no-cors' // Use 'no-cors' if your Apps Script doesn't handle CORS preflight (common)
                                     // Note: 'no-cors' means you won't get a detailed response back in JS,
                                     // but the data should still reach the script if the URL is correct.
                                     // If your script *does* handle CORS, remove mode: 'no-cors'.
                });

                 // Since 'no-cors' often results in an opaque response, we might assume success if fetch doesn't throw an error.
                 // A more robust solution involves the Apps Script returning a proper CORS header and JSON response.
                 // For now, we'll assume success on reaching this point without error.

                console.log('Subscription data potentially sent.');
                newsletterMessage.textContent = 'Thank you for subscribing!';
                newsletterMessage.classList.remove('text-red-500');
                newsletterMessage.classList.add('text-green-500');

                // Hide popup permanently after a short delay
                setTimeout(() => {
                     hideNewsletterPopup(true);
                }, 2000);


            } catch (error) {
                console.error('Error submitting newsletter:', error);
                newsletterMessage.textContent = 'Subscription failed. Please try again.';
                newsletterMessage.classList.add('text-red-500');
                newsletterMessage.classList.remove('text-green-500');
                 submitButton.disabled = false; // Re-enable button on error
                 submitButton.textContent = 'Subscribe';
            }
        });

        // Show popup after a delay on page load
         document.addEventListener('DOMContentLoaded', () => {
             setTimeout(showNewsletterPopup, 5000); // Show after 5 seconds
         });

        // Testimonial Carousel script (similar to product carousel)
        const testimonialItemsContainer = document.getElementById('testimonial-items');
        const testimonialItems = testimonialItemsContainer ? testimonialItemsContainer.querySelectorAll('.testimonial-item') : [];
        const testimonialPrevBtn = document.getElementById('testimonial-prev-btn');
        const testimonialNextBtn = document.getElementById('testimonial-next-btn');
        let currentTestimonialSlide = 0;
        let testimonialAutoSlideInterval;

        function showTestimonialSlide(index) {
             if (!testimonialItems || testimonialItems.length === 0) return;
             index = Math.max(0, Math.min(index, testimonialItems.length - 1)); // Ensure index is valid

            testimonialItems.forEach((item, i) => {
                item.classList.remove('opacity-100');
                item.classList.add('opacity-0');
                if (i === index) {
                    item.classList.remove('opacity-0');
                    item.classList.add('opacity-100');
                }
            });
            currentTestimonialSlide = index;
        }

        function nextTestimonialSlide() {
            if (testimonialItems.length === 0) return;
            const nextIndex = (currentTestimonialSlide + 1) % testimonialItems.length;
            showTestimonialSlide(nextIndex);
        }

        function prevTestimonialSlide() {
             if (testimonialItems.length === 0) return;
            const prevIndex = (currentTestimonialSlide - 1 + testimonialItems.length) % testimonialItems.length;
            showTestimonialSlide(prevIndex);
        }

        function startTestimonialAutoSlide() {
            stopTestimonialAutoSlide(); // Clear existing interval
            if (testimonialItems.length > 1) {
                 testimonialAutoSlideInterval = setInterval(nextTestimonialSlide, 6000); // Change testimonial every 6 seconds
            }
        }

        function stopTestimonialAutoSlide() {
            clearInterval(testimonialAutoSlideInterval);
        }

        // Event Listeners for testimonial controls
        if(testimonialNextBtn) {
            testimonialNextBtn.addEventListener('click', () => {
                nextTestimonialSlide();
                stopTestimonialAutoSlide();
            });
        }

        if(testimonialPrevBtn) {
            testimonialPrevBtn.addEventListener('click', () => {
                prevTestimonialSlide();
                stopTestimonialAutoSlide();
            });
        }

        // Initialize testimonial carousel
        document.addEventListener('DOMContentLoaded', () => {
            if (testimonialItems.length > 0) {
                showTestimonialSlide(0);
                startTestimonialAutoSlide();
            }
        });


    </script>

</body>
</html>
